{"ast":null,"code":"import { computeBytesCount, deepClone, jsonStringify } from './utils';\nexport function createContextManager(computeBytesCountImpl) {\n  if (computeBytesCountImpl === void 0) {\n    computeBytesCountImpl = computeBytesCount;\n  }\n  var context = {};\n  var bytesCountCache;\n  return {\n    getBytesCount: function () {\n      if (bytesCountCache === undefined) {\n        bytesCountCache = computeBytesCountImpl(jsonStringify(context));\n      }\n      return bytesCountCache;\n    },\n    /** @deprecated use getContext instead */\n    get: function () {\n      return context;\n    },\n    /** @deprecated use setContextProperty instead */\n    add: function (key, value) {\n      context[key] = value;\n      bytesCountCache = undefined;\n    },\n    /** @deprecated renamed to removeContextProperty */\n    remove: function (key) {\n      delete context[key];\n      bytesCountCache = undefined;\n    },\n    /** @deprecated use setContext instead */\n    set: function (newContext) {\n      context = newContext;\n      bytesCountCache = undefined;\n    },\n    getContext: function () {\n      return deepClone(context);\n    },\n    setContext: function (newContext) {\n      context = deepClone(newContext);\n      bytesCountCache = undefined;\n    },\n    setContextProperty: function (key, property) {\n      context[key] = deepClone(property);\n      bytesCountCache = undefined;\n    },\n    removeContextProperty: function (key) {\n      delete context[key];\n      bytesCountCache = undefined;\n    },\n    clearContext: function () {\n      context = {};\n      bytesCountCache = undefined;\n    }\n  };\n}","map":{"version":3,"names":["computeBytesCount","deepClone","jsonStringify","createContextManager","computeBytesCountImpl","context","bytesCountCache","getBytesCount","undefined","get","add","key","value","remove","set","newContext","getContext","setContext","setContextProperty","property","removeContextProperty","clearContext"],"sources":["/Users/sean.dever/Desktop/PersonalRepos/rum_and_trace_correlation/rum_app/node_modules/@datadog/browser-core/src/tools/contextManager.ts"],"sourcesContent":["import { computeBytesCount, deepClone, jsonStringify } from './utils'\nimport type { Context, ContextValue } from './context'\n\nexport type ContextManager = ReturnType<typeof createContextManager>\n\nexport function createContextManager(computeBytesCountImpl = computeBytesCount) {\n  let context: Context = {}\n  let bytesCountCache: number | undefined\n\n  return {\n    getBytesCount: () => {\n      if (bytesCountCache === undefined) {\n        bytesCountCache = computeBytesCountImpl(jsonStringify(context)!)\n      }\n      return bytesCountCache\n    },\n    /** @deprecated use getContext instead */\n    get: () => context,\n\n    /** @deprecated use setContextProperty instead */\n    add: (key: string, value: any) => {\n      context[key] = value as ContextValue\n      bytesCountCache = undefined\n    },\n\n    /** @deprecated renamed to removeContextProperty */\n    remove: (key: string) => {\n      delete context[key]\n      bytesCountCache = undefined\n    },\n\n    /** @deprecated use setContext instead */\n    set: (newContext: object) => {\n      context = newContext as Context\n      bytesCountCache = undefined\n    },\n\n    getContext: () => deepClone(context),\n\n    setContext: (newContext: Context) => {\n      context = deepClone(newContext)\n      bytesCountCache = undefined\n    },\n\n    setContextProperty: (key: string, property: any) => {\n      context[key] = deepClone(property)\n      bytesCountCache = undefined\n    },\n\n    removeContextProperty: (key: string) => {\n      delete context[key]\n      bytesCountCache = undefined\n    },\n\n    clearContext: () => {\n      context = {}\n      bytesCountCache = undefined\n    },\n  }\n}\n"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,SAAS,EAAEC,aAAa,QAAQ,SAAS;AAKrE,OAAM,SAAUC,oBAAoBA,CAACC,qBAAyC;EAAzC,IAAAA,qBAAA;IAAAA,qBAAA,GAAAJ,iBAAyC;EAAA;EAC5E,IAAIK,OAAO,GAAY,EAAE;EACzB,IAAIC,eAAmC;EAEvC,OAAO;IACLC,aAAa,EAAE,SAAAA,CAAA;MACb,IAAID,eAAe,KAAKE,SAAS,EAAE;QACjCF,eAAe,GAAGF,qBAAqB,CAACF,aAAa,CAACG,OAAO,CAAE,CAAC;;MAElE,OAAOC,eAAe;IACxB,CAAC;IACD;IACAG,GAAG,EAAE,SAAAA,CAAA;MAAM,OAAAJ,OAAO;IAAP,CAAO;IAElB;IACAK,GAAG,EAAE,SAAAA,CAACC,GAAW,EAAEC,KAAU;MAC3BP,OAAO,CAACM,GAAG,CAAC,GAAGC,KAAqB;MACpCN,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAED;IACAK,MAAM,EAAE,SAAAA,CAACF,GAAW;MAClB,OAAON,OAAO,CAACM,GAAG,CAAC;MACnBL,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAED;IACAM,GAAG,EAAE,SAAAA,CAACC,UAAkB;MACtBV,OAAO,GAAGU,UAAqB;MAC/BT,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAEDQ,UAAU,EAAE,SAAAA,CAAA;MAAM,OAAAf,SAAS,CAACI,OAAO,CAAC;IAAlB,CAAkB;IAEpCY,UAAU,EAAE,SAAAA,CAACF,UAAmB;MAC9BV,OAAO,GAAGJ,SAAS,CAACc,UAAU,CAAC;MAC/BT,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAEDU,kBAAkB,EAAE,SAAAA,CAACP,GAAW,EAAEQ,QAAa;MAC7Cd,OAAO,CAACM,GAAG,CAAC,GAAGV,SAAS,CAACkB,QAAQ,CAAC;MAClCb,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAEDY,qBAAqB,EAAE,SAAAA,CAACT,GAAW;MACjC,OAAON,OAAO,CAACM,GAAG,CAAC;MACnBL,eAAe,GAAGE,SAAS;IAC7B,CAAC;IAEDa,YAAY,EAAE,SAAAA,CAAA;MACZhB,OAAO,GAAG,EAAE;MACZC,eAAe,GAAGE,SAAS;IAC7B;GACD;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}