{"ast":null,"code":"import { deepClone, getType } from './utils';\n/**\n * Current limitation:\n * - field path do not support array, 'a.b.c' only\n */\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n  var clone = deepClone(object);\n  var result = modifier(clone);\n  modifiableFieldPaths.forEach(function (path) {\n    var originalValue = get(object, path);\n    var newValue = get(clone, path);\n    var originalType = getType(originalValue);\n    var newType = getType(newValue);\n    if (newType === originalType) {\n      set(object, path, newValue);\n    } else if (originalType === 'object' && (newType === 'undefined' || newType === 'null')) {\n      set(object, path, {});\n    }\n  });\n  return result;\n}\nfunction get(object, path) {\n  var current = object;\n  for (var _i = 0, _a = path.split('.'); _i < _a.length; _i++) {\n    var field = _a[_i];\n    if (!isValidObjectContaining(current, field)) {\n      return;\n    }\n    current = current[field];\n  }\n  return current;\n}\nfunction set(object, path, value) {\n  var current = object;\n  var fields = path.split('.');\n  for (var i = 0; i < fields.length; i += 1) {\n    var field = fields[i];\n    if (!isValidObjectContaining(current, field)) {\n      return;\n    }\n    if (i !== fields.length - 1) {\n      current = current[field];\n    } else {\n      current[field] = value;\n    }\n  }\n}\nfunction isValidObjectContaining(object, field) {\n  return typeof object === 'object' && object !== null && Object.prototype.hasOwnProperty.call(object, field);\n}","map":{"version":3,"names":["deepClone","getType","limitModification","object","modifiableFieldPaths","modifier","clone","result","forEach","path","originalValue","get","newValue","originalType","newType","set","current","_i","_a","split","length","field","isValidObjectContaining","value","fields","i","Object","prototype","hasOwnProperty","call"],"sources":["/Users/sean.dever/Desktop/PersonalRepos/apm-enablement-sessions/rum_and_trace_correlation/rum_app/node_modules/@datadog/browser-core/src/tools/limitModification.ts"],"sourcesContent":["import type { Context } from './context'\nimport { deepClone, getType } from './utils'\n\n/**\n * Current limitation:\n * - field path do not support array, 'a.b.c' only\n */\nexport function limitModification<T extends Context, Result>(\n  object: T,\n  modifiableFieldPaths: string[],\n  modifier: (object: T) => Result\n): Result | undefined {\n  const clone = deepClone(object)\n  const result = modifier(clone)\n  modifiableFieldPaths.forEach((path) => {\n    const originalValue = get(object, path)\n    const newValue = get(clone, path)\n    const originalType = getType(originalValue)\n    const newType = getType(newValue)\n    if (newType === originalType) {\n      set(object, path, newValue)\n    } else if (originalType === 'object' && (newType === 'undefined' || newType === 'null')) {\n      set(object, path, {})\n    }\n  })\n  return result\n}\n\nfunction get(object: unknown, path: string) {\n  let current = object\n  for (const field of path.split('.')) {\n    if (!isValidObjectContaining(current, field)) {\n      return\n    }\n    current = current[field]\n  }\n  return current\n}\n\nfunction set(object: unknown, path: string, value: unknown) {\n  let current = object\n  const fields = path.split('.')\n  for (let i = 0; i < fields.length; i += 1) {\n    const field = fields[i]\n    if (!isValidObjectContaining(current, field)) {\n      return\n    }\n    if (i !== fields.length - 1) {\n      current = current[field]\n    } else {\n      current[field] = value\n    }\n  }\n}\n\nfunction isValidObjectContaining(object: unknown, field: string): object is { [key: string]: unknown } {\n  return typeof object === 'object' && object !== null && Object.prototype.hasOwnProperty.call(object, field)\n}\n"],"mappings":"AACA,SAASA,SAAS,EAAEC,OAAO,QAAQ,SAAS;AAE5C;;;;AAIA,OAAM,SAAUC,iBAAiBA,CAC/BC,MAAS,EACTC,oBAA8B,EAC9BC,QAA+B;EAE/B,IAAMC,KAAK,GAAGN,SAAS,CAACG,MAAM,CAAC;EAC/B,IAAMI,MAAM,GAAGF,QAAQ,CAACC,KAAK,CAAC;EAC9BF,oBAAoB,CAACI,OAAO,CAAC,UAACC,IAAI;IAChC,IAAMC,aAAa,GAAGC,GAAG,CAACR,MAAM,EAAEM,IAAI,CAAC;IACvC,IAAMG,QAAQ,GAAGD,GAAG,CAACL,KAAK,EAAEG,IAAI,CAAC;IACjC,IAAMI,YAAY,GAAGZ,OAAO,CAACS,aAAa,CAAC;IAC3C,IAAMI,OAAO,GAAGb,OAAO,CAACW,QAAQ,CAAC;IACjC,IAAIE,OAAO,KAAKD,YAAY,EAAE;MAC5BE,GAAG,CAACZ,MAAM,EAAEM,IAAI,EAAEG,QAAQ,CAAC;KAC5B,MAAM,IAAIC,YAAY,KAAK,QAAQ,KAAKC,OAAO,KAAK,WAAW,IAAIA,OAAO,KAAK,MAAM,CAAC,EAAE;MACvFC,GAAG,CAACZ,MAAM,EAAEM,IAAI,EAAE,EAAE,CAAC;;EAEzB,CAAC,CAAC;EACF,OAAOF,MAAM;AACf;AAEA,SAASI,GAAGA,CAACR,MAAe,EAAEM,IAAY;EACxC,IAAIO,OAAO,GAAGb,MAAM;EACpB,KAAoB,IAAAc,EAAA,IAAe,EAAfC,EAAA,GAAAT,IAAI,CAACU,KAAK,CAAC,GAAG,CAAC,EAAfF,EAAA,GAAAC,EAAA,CAAAE,MAAe,EAAfH,EAAA,EAAe,EAAE;IAAhC,IAAMI,KAAK,GAAAH,EAAA,CAAAD,EAAA;IACd,IAAI,CAACK,uBAAuB,CAACN,OAAO,EAAEK,KAAK,CAAC,EAAE;MAC5C;;IAEFL,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC;;EAE1B,OAAOL,OAAO;AAChB;AAEA,SAASD,GAAGA,CAACZ,MAAe,EAAEM,IAAY,EAAEc,KAAc;EACxD,IAAIP,OAAO,GAAGb,MAAM;EACpB,IAAMqB,MAAM,GAAGf,IAAI,CAACU,KAAK,CAAC,GAAG,CAAC;EAC9B,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACJ,MAAM,EAAEK,CAAC,IAAI,CAAC,EAAE;IACzC,IAAMJ,KAAK,GAAGG,MAAM,CAACC,CAAC,CAAC;IACvB,IAAI,CAACH,uBAAuB,CAACN,OAAO,EAAEK,KAAK,CAAC,EAAE;MAC5C;;IAEF,IAAII,CAAC,KAAKD,MAAM,CAACJ,MAAM,GAAG,CAAC,EAAE;MAC3BJ,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC;KACzB,MAAM;MACLL,OAAO,CAACK,KAAK,CAAC,GAAGE,KAAK;;;AAG5B;AAEA,SAASD,uBAAuBA,CAACnB,MAAe,EAAEkB,KAAa;EAC7D,OAAO,OAAOlB,MAAM,KAAK,QAAQ,IAAIA,MAAM,KAAK,IAAI,IAAIuB,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAAC1B,MAAM,EAAEkB,KAAK,CAAC;AAC7G"},"metadata":{},"sourceType":"module","externalDependencies":[]}