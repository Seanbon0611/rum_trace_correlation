{"ast":null,"code":"import { noop } from '@datadog/browser-core';\nexport function trackEventCounts(_a) {\n  var lifeCycle = _a.lifeCycle,\n    isChildEvent = _a.isChildEvent,\n    _b = _a.onChange,\n    callback = _b === void 0 ? noop : _b;\n  var eventCounts = {\n    errorCount: 0,\n    longTaskCount: 0,\n    resourceCount: 0,\n    actionCount: 0,\n    frustrationCount: 0\n  };\n  var subscription = lifeCycle.subscribe(11 /* RUM_EVENT_COLLECTED */, function (event) {\n    if (event.type === 'view' || !isChildEvent(event)) {\n      return;\n    }\n    switch (event.type) {\n      case \"error\" /* ERROR */:\n        eventCounts.errorCount += 1;\n        callback();\n        break;\n      case \"action\" /* ACTION */:\n        eventCounts.actionCount += 1;\n        if (event.action.frustration) {\n          eventCounts.frustrationCount += event.action.frustration.type.length;\n        }\n        callback();\n        break;\n      case \"long_task\" /* LONG_TASK */:\n        eventCounts.longTaskCount += 1;\n        callback();\n        break;\n      case \"resource\" /* RESOURCE */:\n        eventCounts.resourceCount += 1;\n        callback();\n        break;\n    }\n  });\n  return {\n    stop: function () {\n      subscription.unsubscribe();\n    },\n    eventCounts: eventCounts\n  };\n}","map":{"version":3,"names":["noop","trackEventCounts","_a","lifeCycle","isChildEvent","_b","onChange","callback","eventCounts","errorCount","longTaskCount","resourceCount","actionCount","frustrationCount","subscription","subscribe","event","type","action","frustration","length","stop","unsubscribe"],"sources":["/Users/sean.dever/Desktop/PersonalRepos/apm-enablement-sessions/rum_and_trace_correlation/rum_app/node_modules/@datadog/browser-rum-core/src/domain/trackEventCounts.ts"],"sourcesContent":["import { noop } from '@datadog/browser-core'\nimport { RumEventType } from '../rawRumEvent.types'\nimport type { RumActionEvent, RumErrorEvent, RumLongTaskEvent, RumResourceEvent } from '../rumEvent.types'\nimport type { LifeCycle } from './lifeCycle'\nimport { LifeCycleEventType } from './lifeCycle'\n\nexport interface EventCounts {\n  errorCount: number\n  actionCount: number\n  longTaskCount: number\n  resourceCount: number\n  frustrationCount: number\n}\n\nexport function trackEventCounts({\n  lifeCycle,\n  isChildEvent,\n  onChange: callback = noop,\n}: {\n  lifeCycle: LifeCycle\n  isChildEvent: (event: RumActionEvent | RumErrorEvent | RumLongTaskEvent | RumResourceEvent) => boolean\n  onChange?: () => void\n}) {\n  const eventCounts: EventCounts = {\n    errorCount: 0,\n    longTaskCount: 0,\n    resourceCount: 0,\n    actionCount: 0,\n    frustrationCount: 0,\n  }\n\n  const subscription = lifeCycle.subscribe(LifeCycleEventType.RUM_EVENT_COLLECTED, (event): void => {\n    if (event.type === 'view' || !isChildEvent(event)) {\n      return\n    }\n    switch (event.type) {\n      case RumEventType.ERROR:\n        eventCounts.errorCount += 1\n        callback()\n        break\n      case RumEventType.ACTION:\n        eventCounts.actionCount += 1\n        if (event.action.frustration) {\n          eventCounts.frustrationCount += event.action.frustration.type.length\n        }\n        callback()\n        break\n      case RumEventType.LONG_TASK:\n        eventCounts.longTaskCount += 1\n        callback()\n        break\n      case RumEventType.RESOURCE:\n        eventCounts.resourceCount += 1\n        callback()\n        break\n    }\n  })\n\n  return {\n    stop: () => {\n      subscription.unsubscribe()\n    },\n    eventCounts,\n  }\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,uBAAuB;AAc5C,OAAM,SAAUC,gBAAgBA,CAACC,EAQhC;MAPCC,SAAS,GAAAD,EAAA,CAAAC,SAAA;IACTC,YAAY,GAAAF,EAAA,CAAAE,YAAA;IACZC,EAAA,GAAAH,EAAA,CAAAI,QAAyB;IAAfC,QAAQ,GAAAF,EAAA,cAAGL,IAAI,GAAAK,EAAA;EAMzB,IAAMG,WAAW,GAAgB;IAC/BC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAE,CAAC;IAChBC,aAAa,EAAE,CAAC;IAChBC,WAAW,EAAE,CAAC;IACdC,gBAAgB,EAAE;GACnB;EAED,IAAMC,YAAY,GAAGX,SAAS,CAACY,SAAS,+BAAyC,UAACC,KAAK;IACrF,IAAIA,KAAK,CAACC,IAAI,KAAK,MAAM,IAAI,CAACb,YAAY,CAACY,KAAK,CAAC,EAAE;MACjD;;IAEF,QAAQA,KAAK,CAACC,IAAI;MAChB;QACET,WAAW,CAACC,UAAU,IAAI,CAAC;QAC3BF,QAAQ,EAAE;QACV;MACF;QACEC,WAAW,CAACI,WAAW,IAAI,CAAC;QAC5B,IAAII,KAAK,CAACE,MAAM,CAACC,WAAW,EAAE;UAC5BX,WAAW,CAACK,gBAAgB,IAAIG,KAAK,CAACE,MAAM,CAACC,WAAW,CAACF,IAAI,CAACG,MAAM;;QAEtEb,QAAQ,EAAE;QACV;MACF;QACEC,WAAW,CAACE,aAAa,IAAI,CAAC;QAC9BH,QAAQ,EAAE;QACV;MACF;QACEC,WAAW,CAACG,aAAa,IAAI,CAAC;QAC9BJ,QAAQ,EAAE;QACV;IAAK;EAEX,CAAC,CAAC;EAEF,OAAO;IACLc,IAAI,EAAE,SAAAA,CAAA;MACJP,YAAY,CAACQ,WAAW,EAAE;IAC5B,CAAC;IACDd,WAAW,EAAAA;GACZ;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}